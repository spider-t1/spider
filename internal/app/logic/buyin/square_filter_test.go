package buyin

import (
	"fmt"
	"testing"
)

func TestSquareFilter(t *testing.T) {
	// 使用 fans_analyze_test.go 中的示例配置，确保鉴权参数齐全
	config := ClientConfig{
		Cookie:    "qc_tt_tag=0; is_staff_user=false; __security_mc_1_s_sdk_crypt_esdk=a98483d8-4be8-a9c8; bd_ticket_guard_client_web_domain=2; bd_ticket_guard_client_data=eyJiZC10aWNrZXQtZ3VhcmQtdmVyc2lvbiI6MiwiYmQtdGlja2V0LWd1YXJkLWl0ZXJhdGlvbi12ZXJzaW9uIjoxLCJiZC10aWNrZXQtZ3VhcmQtcmVlLXB1YmxpYy1rZXkiOiJCQWtlMTg3Q3hjKy9nY0hJN1V3M0ZtaXQzMEhiNnJZYXBCeXQzblUwdENubGxHaVZkMndNc2pkdTMwV2w4SGMxRHNZZHA2aUJxekQ4aXZmeCtYR2cyaDA9IiwiYmQtdGlja2V0LWd1YXJkLXdlYi12ZXJzaW9uIjoyfQ%3D%3D; s_v_web_id=verify_mfytk681_4DjIc3ii_nHhc_42l4_8pnp_Fsbpzk3XsVg9; passport_csrf_token=bf94b57109d8402a1f0b75a104bcab39; passport_csrf_token_default=bf94b57109d8402a1f0b75a104bcab39; bd_ticket_guard_server_data=eyJ0aWNrZXQiOiJoYXNoLlVWTEhRcFpDQU0rZktmaWVrWHE2QlUzQWw1Z1hBVmxhdUZIdmFsWE9ydlE9IiwidHNfc2lnbiI6InRzLjIuNjdjNjY5ZGEzZGI0YzJiYmIxZGE1MWZiOGQxN2MzYmFmNzk4ZTE4OGE3ODhlZjc1ZmNjZTkyODNlMDA3MjlhZmM0ZmJlODdkMjMxOWNmMDUzMTg2MjRjZWRhMTQ5MTFjYTQwNmRlZGJlYmVkZGIyZTMwZmNlOGQ0ZmEwMjU3NWQiLCJjbGllbnRfY2VydCI6InB1Yi5CQWtlMTg3Q3hjKy9nY0hJN1V3M0ZtaXQzMEhiNnJZYXBCeXQzblUwdENubGxHaVZkMndNc2pkdTMwV2w4SGMxRHNZZHA2aUJxekQ4aXZmeCtYR2cyaDA9IiwibG9nX2lkIjoiMjAyNTEwMTUxMTM4MDUzNjA2MUZFMUI0MjA5QkIzNEUyNCIsImNyZWF0ZV90aW1lIjoxNzYwNDk5NDg2fQ%3D%3D; bd_ticket_guard_web_domain=3; Hm_lvt_b6520b076191ab4b36812da4c90f7a5e=1760499770,1761122709; HMACCOUNT=F38274C5C42977AB; csrf_session_id=a6d0b2f712f9453239dc34e8c9d474bd; passport_mfa_token=CjYIYJ%2BJ4C%2BlIqwqvbDhKVEhhw3KsrqEwPPPe6IV0Ao%2F%2Bvs4f%2BAIR95dyBm5j1rDaCnjUL1BoSsaSgo8AAAAAAAAAAAAAE%2BijiyxB0zHPqlax%2FxteyBGZbN5toEkYRGS%2FLVCSZ60ET9YKVqAHRs9IxAbVP6g5SdgEIji%2Fw0Y9rHRbCACIgEDDK7AwA%3D%3D; odin_tt=efa73e43af4f87697215453f9486b954498ad73fbcecf1f6350a4548143d778953e5e992e755502143320d50e059440a3508a399829830dfe18ce47a390b5d69; passport_auth_status=4af44794c365b043077eb4217255d632%2C3d54bd69561b68ec36e84ddf07522566; passport_auth_status_ss=4af44794c365b043077eb4217255d632%2C3d54bd69561b68ec36e84ddf07522566; uid_tt=9c4325c624f459ffd7faac4004260b49; uid_tt_ss=9c4325c624f459ffd7faac4004260b49; sid_tt=1be69eb73afbfe02888fe63a83bd87ea; sessionid=1be69eb73afbfe02888fe63a83bd87ea; sessionid_ss=1be69eb73afbfe02888fe63a83bd87ea; _tea_utm_cache_3813=undefined; gfkadpd=2631,22740; scmVer=1.0.1.9447; buyin_shop_type=11; buyin_account_child_type=1; buyin_app_id=13; buyin_shop_type_v2=11; buyin_account_child_type_v2=1; buyin_app_id_v2=13; ucas_c0=CkAKBTEuMC4wEK6IhI6EtP-DaRjmJiD7-MHO9cycASiwITDUs6D3gKwMQKL7n8gGSKKv3MoGUKe8p-rbnfv0aFhvEhQdc5KMYAMesuxIw9dTsIfRf2lF0w; ucas_c0_ss=CkAKBTEuMC4wEK6IhI6EtP-DaRjmJiD7-MHO9cycASiwITDUs6D3gKwMQKL7n8gGSKKv3MoGUKe8p-rbnfv0aFhvEhQdc5KMYAMesuxIw9dTsIfRf2lF0w; PHPSESSID=4549a6d16cb6e9cf0ce31dd4665268f3; PHPSESSID_SS=4549a6d16cb6e9cf0ce31dd4665268f3; ttwid=1%7CV1_8jklV7JQ20ejEh5FkWqazqnXNAtRBni_T7Mwjp4w%7C1762131387%7Cfe8af15f6b7c398b64f424c309a9a9d6f10fe43b56dde211af650f3a2a700db1; COMPASS_LUOPAN_DT=session_7568293338182222089; Hm_lpvt_b6520b076191ab4b36812da4c90f7a5e=1762152241; ucas_c0_buyin=CkAKBTEuMC4wEKaIjvTz5ZOEaRjmJiD7-MHO9cycASiwITDUs6D3gKwMQLGeocgGSLHS3coGUKe8p-rbnfv0aFhvEhRouTrPnJ7e7A2VfRHZcMec2MOkVA; ucas_c0_ss_buyin=CkAKBTEuMC4wEKaIjvTz5ZOEaRjmJiD7-MHO9cycASiwITDUs6D3gKwMQLGeocgGSLHS3coGUKe8p-rbnfv0aFhvEhRouTrPnJ7e7A2VfRHZcMec2MOkVA; sid_guard=1be69eb73afbfe02888fe63a83bd87ea%7C1762152241%7C5184000%7CFri%2C+02-Jan-2026+06%3A44%3A01+GMT; session_tlb_tag=sttt%7C9%7CG-aetzr7_gKIj-Y6g72H6v_________6k6u6EOIocgCgvBpl96Dzmv0kmmK7N45gvx4ZQPU4pmI%3D; sid_ucp_v1=1.0.0-KDFlZTBiMzgxNWM5ZDgyYjQwYzcwMWYxNTI1YmU2ZWJmOGFjYTkxYzgKGgjUs6D3gKwMELGeocgGGLAhIAw4AkDxB0gEGgJsZiIgMWJlNjllYjczYWZiZmUwMjg4OGZlNjNhODNiZDg3ZWE; ssid_ucp_v1=1.0.0-KDFlZTBiMzgxNWM5ZDgyYjQwYzcwMWYxNTI1YmU2ZWJmOGFjYTkxYzgKGgjUs6D3gKwMELGeocgGGLAhIAw4AkDxB0gEGgJsZiIgMWJlNjllYjczYWZiZmUwMjg4OGZlNjNhODNiZDg3ZWE; SASID=SID2_7568385250348941611; BUYIN_SASID=SID2_7568385250348941611/jYX+EhTZFiJBnRJ3w4wTxakFEyvlOcdzKBmxiek=; source=seo.fxg.jinritemai.com; ffa_goods_ewid=55c83505d6719fbef679b169639d728c; ffa_goods_seraph_did=undefined; Hm_lpvt_b6520b076191ab4b36812da4c90f7a5e=1761383275; ttwid=1%7CV1_8jklV7JQ20ejEh5FkWqazqnXNAtRBni_T7Mwjp4w%7C1761383274%7C4b92a4ea32b15081a3a85a0ab52c84b02ac37911205f7e5701cc3ef93c54ba92; tt_scid=m73VPA78rPkhA3y7sRyPdel1XUWxy.snsrbRIyHalSDxXM-34DYk5sP5F7Fudi5dab65; passport_mfa_token=CjYIYJ%2BJ4C%2BlIqwqvbDhKVEhhw3KsrqEwPPPe6IV0Ao%2F%2Bvs4f%2BAIR95dyBm5j1rDaCnjUL1BoSsaSgo8AAAAAAAAAAAAAE%2BijiyxB0zHPqlax%2FxteyBGZbN5toEkYRGS%2FLVCSZ60ET9YKVqAHRs9IxAbVP6g5SdgEIji%2Fw0Y9rHRbCACIgEDDK7AwA%3D%3D; odin_tt=efa73e43af4f87697215453f9486b954498ad73fbcecf1f6350a4548143d778953e5e992e755502143320d50e059440a3508a399829830dfe18ce47a390b5d69; passport_auth_status=4af44794c365b043077eb4217255d632%2C3d54bd69561b68ec36e84ddf07522566; passport_auth_status_ss=4af44794c365b043077eb4217255d632%2C3d54bd69561b68ec36e84ddf07522566; bd_ticket_guard_server_data=eyJ0aWNrZXQiOiJoYXNoLmphZ1NJK3hLQmUzbWZUeTRMZmJuamZpMlkxSW5XRjVxY0l0Rk9vZkhGNnM9IiwidHNfc2lnbiI6InRzLjIuZjQ0MGRiNmMxZjk5NmQ1NmQ4ZDM3MWNhMWEwMDM2MjcxMWY2MDBkOTI5YTI4OWVhNTZhZmJhZTA1OTJhZWQzNGM0ZmJlODdkMjMxOWNmMDUzMTg2MjRjZWRhMTQ5MTFjYTQwNmRlZGJlYmVkZGIyZTMwZmNlOGQ0ZmEwMjU3NWQiLCJjbGllbnRfY2VydCI6InB1Yi5CQWtlMTg3Q3hjKy9nY0hJN1V3M0ZtaXQzMEhiNnJZYXBCeXQzblUwdENubGxHaVZkMndNc2pkdTMwV2w4SGMxRHNZZHA2aUJxekQ4aXZmeCtYR2cyaDA9IiwibG9nX2lkIjoiMjAyNTEwMjUxNzEwMDE2QjEzRjUxOTJDNDJDMUQ2RDM3MSIsImNyZWF0ZV90aW1lIjoxNzYxMzgzNDAxfQ%3D%3D; uid_tt=9c4325c624f459ffd7faac4004260b49; uid_tt_ss=9c4325c624f459ffd7faac4004260b49; sid_tt=1be69eb73afbfe02888fe63a83bd87ea; sessionid=1be69eb73afbfe02888fe63a83bd87ea; sessionid_ss=1be69eb73afbfe02888fe63a83bd87ea; PHPSESSID=2955cf627ff7158812afe6272e799468; PHPSESSID_SS=2955cf627ff7158812afe6272e799468; ucas_c0=CkAKBTEuMC4wEKiIkriUkrH_aBjmJiCU8YC46ozoBiiwITDUs6D3gKwMQJSJ-8cGSJS9t8oGUKq8oabq4YPzaFhvEhTHEDFkJm0sNb-E6NZuGvXUt7rGMg; ucas_c0_ss=CkAKBTEuMC4wEKiIkriUkrH_aBjmJiCU8YC46ozoBiiwITDUs6D3gKwMQJSJ-8cGSJS9t8oGUKq8oabq4YPzaFhvEhTHEDFkJm0sNb-E6NZuGvXUt7rGMg; gfkadpd=4272,23756; ecom_gray_shop_id=1677577; sid_guard=1be69eb73afbfe02888fe63a83bd87ea%7C1761526945%7C5184000%7CFri%2C+26-Dec-2025+01%3A02%3A25+GMT; session_tlb_tag=sttt%7C3%7CG-aetzr7_gKIj-Y6g72H6v_________Pws0B7_YFL-EeCCysF4kw6kUvRGiOgqA5K6PtF4m1UxI%3D; sid_ucp_v1=1.0.0-KGVlZWM0YmE4YjVjNzYzNTkwNGE1Yzc3ZTAwMmVhY2Q0MzgwYTllODIKGgjUs6D3gKwMEKGJ-8cGGLAhIAw4AkDxB0gEGgJsZiIgMWJlNjllYjczYWZiZmUwMjg4OGZlNjNhODNiZDg3ZWE; ssid_ucp_v1=1.0.0-KGVlZWM0YmE4YjVjNzYzNTkwNGE1Yzc3ZTAwMmVhY2Q0MzgwYTllODIKGgjUs6D3gKwMEKGJ-8cGGLAhIAw4AkDxB0gEGgJsZiIgMWJlNjllYjczYWZiZmUwMjg4OGZlNjNhODNiZDg3ZWE; BUYIN_SASID=SID2_7565699655491420467",
		EWID:      "ae3390605f3dfe70921708a03f390b7b1",
		VerifyFp:  "verify_mfytk681_4DjIc3ii_nHhc_42l4_8pnp_Fsbpzfk3XsVg9",
		Fp:        "verify_mfytk681_4DjIc3ii_nHhc_42l4_8pnp_Fsbpfzk3XsVg9",
		MsToken:   "dMPQR4Mym3DOrto-mtrQzIKJr6OupTRyRmapVUl6JTMZHxLi_CSVhLloUkhtRS0DuZtd8dKUz8tzJWXx4HFowkmlEPtcafNfVCcFwjkUjMEvLjDHLyljDBAFSMFlHnhPqH-LFtOePXZ5fbm41HfwEsMLh_kXzdoakx79qKiDcybI9Jw==",
		UserAgent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36 Edg/141.0.0.0",
	}

	client := NewJXClient(config)
	params := &SquareFilterParams{Type: "1", ReqScene: "1"}
	resp, status, err := client.SquareFilter(params)
	if err != nil {
		t.Fatalf("SquareFilter failed: %v", err)
	}
	fmt.Println("Status:", status)
	fmt.Printf("response: %+v\n", resp)
}
