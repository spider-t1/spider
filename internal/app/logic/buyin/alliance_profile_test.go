package buyin

import (
	"fmt"
	"github.com/gogf/gf/v2/encoding/gjson"
	"testing"
)

func TestAllianceProfile(t *testing.T) {
	config := ClientConfig{
		Cookie:    "qc_tt_tag=0; is_staff_user=false; __security_mc_1_s_sdk_crypt_sdk=a98483d8-x4be8-a9c8; bd_ticket_guard_client_web_domain=2; bd_ticket_guard_client_data=eyJiZC10aWNrZXQtZ3VhcmQtdmVyc2lvbiI6MiwiYmQtdGlja2V0LWd1YXJkLWl0ZXJhdGlvbi12ZXJzaW9uIjoxLCJiZC10aWNrZXQtZ3VhcmQtcmVlLXB1YmxpYy1rZXkiOiJCQWtlMTg3Q3hjKy9nY0hJN1V3M0ZtaXQzMEhiNnJZYXBCeXQzblUwdENubGxHaVZkMndNc2pkdTMwV2w4SGMxRHNZZHA2aUJxekQ4aXZmeCtYR2cyaDA9IiwiYmQtdGlja2V0LWd1YXJkLXdlYi12ZXJzaW9uIjoyfQ%3D%3D; s_v_web_id=verify_mfytk681_4DjIc3ii_nHhc_42l4_8pnp_Fsbpzk3XsVg9; passport_csrf_token=bf94b57109d8402a1f0b75a104bcab39; passport_csrf_token_default=bf94b57109d8402a1f0b75a104bcab39; bd_ticket_guard_server_data=eyJ0aWNrZXQiOiJoYXNoLlVWTEhRcFpDQU0rZktmaWVrWHE2QlUzQWw1Z1hBVmxhdUZIdmFsWE9ydlE9IiwidHNfc2lnbiI6InRzLjIuNjdjNjY5ZGEzZGI0YzJiYmIxZGE1MWZiOGQxN2MzYmFmNzk4ZTE4OGE3ODhlZjc1ZmNjZTkyODNlMDA3MjlhZmM0ZmJlODdkMjMxOWNmMDUzMTg2MjRjZWRhMTQ5MTFjYTQwNmRlZGJlYmVkZGIyZTMwZmNlOGQ0ZmEwMjU3NWQiLCJjbGllbnRfY2VydCI6InB1Yi5CQWtlMTg3Q3hjKy9nY0hJN1V3M0ZtaXQzMEhiNnJZYXBCeXQzblUwdENubGxHaVZkMndNc2pkdTMwV2w4SGMxRHNZZHA2aUJxekQ4aXZmeCtYR2cyaDA9IiwibG9nX2lkIjoiMjAyNTEwMTUxMTM4MDUzNjA2MUZFMUI0MjA5QkIzNEUyNCIsImNyZWF0ZV90aW1lIjoxNzYwNDk5NDg2fQ%3D%3D; bd_ticket_guard_web_domain=3; Hm_lvt_b6520b076191ab4b36812da4c90f7a5e=1760499770,1761122709; HMACCOUNT=F38274C5C42977AB; csrf_session_id=a6d0b2f712f9453239dc34e8c9d474bd; _tea_utm_cache_3813=undefined; gfkadpd=2631,22740; scmVer=1.0.1.9447; ttwid=1%7CV1_8jklV7JQ20ejEh5FkWqazqnXNAtRBni_T7Mwjp4w%7C1762304854%7C27eb6cc9a41274e12594d99421ab78334fb31fbaf906032371c9eff9f479cd8c; passport_mfa_token=CjZtLm87HJXy9u7m45lqt0nYlT6EJU5EcNJVfbOpk508DBH4yIRpnsuXIFfOmOMoPTpjQ%2B6IbM0aSgo8AAAAAAAAAAAAAE%2BtM623uvByW6TKyvUD2bJ2oaoIpiXQbzGiJMRKJnKUTGyse1CdOiRTNZUD%2BLr7RYV8EMvagA4Y9rHRbCACIgEDFGEujA%3D%3D; odin_tt=2ff8410bbddfa71f38289240c3264c3761ae3d4d0541a438f421e358510bed3d823df634fa7ea0a6b5143eeacf39ef1c024d055a05aec55b88cf904bf3d7c4cc; passport_auth_status=2ab627a59931e2a5d86599c68d3bb4cf%2C4af44794c365b043077eb4217255d632; passport_auth_status_ss=2ab627a59931e2a5d86599c68d3bb4cf%2C4af44794c365b043077eb4217255d632; uid_tt=c9f435288db8a74dbf735e709aa3668e; uid_tt_ss=c9f435288db8a74dbf735e709aa3668e; sid_tt=1a738a6109982075103fb15c03356b00; sessionid=1a738a6109982075103fb15c03356b00; sessionid_ss=1a738a6109982075103fb15c03356b00; ucas_c0=CkAKBTEuMC4wELKIjYqE8aiFaRjmJiD7-MHO9cycASiwITDUs6D3gKwMQIrHqsgGSIr75soGUKe8p-rbnfv0aFhvEhQw1Ah25ef0uIhS70ekndH2NG4q4g; ucas_c0_ss=CkAKBTEuMC4wELKIjYqE8aiFaRjmJiD7-MHO9cycASiwITDUs6D3gKwMQIrHqsgGSIr75soGUKe8p-rbnfv0aFhvEhQw1Ah25ef0uIhS70ekndH2NG4q4g; PHPSESSID=064a68807c0ad9be768be635e71103e4; PHPSESSID_SS=064a68807c0ad9be768be635e71103e4; Hm_lpvt_b6520b076191ab4b36812da4c90f7a5e=1762304914; ucas_c0_buyin=CkAKBTEuMC4wEImIkvD38aiFaRjmJiD7-MHO9cycASiwITDUs6D3gKwMQJLHqsgGSJL75soGUKe8p-rbnfv0aFhvEhTZpukbidE3ArsC2h8oOwki7LqwEA; ucas_c0_ss_buyin=CkAKBTEuMC4wEImIkvD38aiFaRjmJiD7-MHO9cycASiwITDUs6D3gKwMQJLHqsgGSJL75soGUKe8p-rbnfv0aFhvEhTZpukbidE3ArsC2h8oOwki7LqwEA; sid_guard=1a738a6109982075103fb15c03356b00%7C1762304914%7C5184000%7CSun%2C+04-Jan-2026+01%3A08%3A34+GMT; session_tlb_tag=sttt%7C1%7CGnOKYQmYIHUQP7FcAzVrAP________-9Lu5BKKwgJ0JQBlWm5-hBQUMiqhfgNC303pVz293M40Y%3D; sid_ucp_v1=1.0.0-KGYyYWE2NmRiOTU2NzhlOWIzYWQyOTllYzUyZjkwZDllNWZmNjAwYzYKGgjUs6D3gKwMEJLHqsgGGLAhIAw4AkDxB0gEGgJsZiIgMWE3MzhhNjEwOTk4MjA3NTEwM2ZiMTVjMDMzNTZiMDA; ssid_ucp_v1=1.0.0-KGYyYWE2NmRiOTU2NzhlOWIzYWQyOTllYzUyZjkwZDllNWZmNjAwYzYKGgjUs6D3gKwMEJLHqsgGGLAhIAw4AkDxB0gEGgJsZiIgMWE3MzhhNjEwOTk4MjA3NTEwM2ZiMTVjMDMzNTZiMDA; COMPASS_LUOPAN_DT=session_7569041122446885129; SASID=SID2_7569040641414807851; BUYIN_SASID=SID2_7569040641414807851; buyin_shop_type=11; buyin_account_child_type=1; buyin_app_id=13; buyin_shop_type_v2=11; buyin_account_child_type_v2=1; buyin_app_id_v2=13; tt_scid=PpKhlE4ElXaDDjsuKzFtCDVTEHHgh4SLgPwv3w7yLSUluUpNSxr7xeD-ENN4QhMj712a",
		EWID:      "aed3bc710187b2074922e7f04ax1df4a2",
		VerifyFp:  "verify_mfytk681_4DjIc3ii_nHhc_x42l4_8pnp_Fsbpzk3XsVg9",
		Fp:        "verify_mfytk681_4DjIc3ii_nHhc_42l4x_8pnp_Fsbpzk3XsVg9",
		MsToken:   "PJw--Om4iuCw6GIsVN_6LrivuNl7FT-yiiHPlwpWG4kIZJfxTu5J4mYjJOyyhSSllHB6sw-_-FW47U2aqwjEh5RsOExlAIz2oxEym92aIQPb32mYn5RfxTURfREMuJB95nFh_I81t46SVblNlkW0jwT5X0akkEmJ5Vvgf9hpVayuDph17ShkLbJk=",
		UserAgent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0",
	}

	client := NewJXClient(config)
	params := &AllianceProfileParams{
		UID:       "v2_0a2c855726c036c8db065bf90deba24280fd6b832f09748eefaadf41762bb35c44d53x345c2b725a2500ccf24b2891a4b0a3c000000000000000000004fac25938d51b1fa1e0d2bb4e0e6ae3aedeec6a0fedce348d3c2af56650358138e9013b42b4b03f4583382b319cdd57be4b71085d8800e18e5ade4c9012001220103c1876d96",
		WorksType: "1",
	}

	resp, err := client.AllianceProfile(params)
	if err != nil {
		t.Fatalf("AllianceProfile failed: %v", err)
	}
	fmt.Printf("response: %+v\n", gjson.MustEncodeString(resp))
}
